document.addEventListener("DOMContentLoaded",function(){"use strict";const l=document.querySelectorAll("article h1, article h2, article h3, article h4, article h5, article h6");if(window.location.hash){const e=document.querySelector(window.location.hash);e&&setTimeout(()=>{location.hash=window.location.hash},100)}const e=[],c=new Map;l.forEach(t=>{if(t.id){const n=document.querySelector(`.article-toc a[href="#${t.id}"]`);if(n){const s={heading:t,link:n,id:t.id,top:0};e.push(s),c.set(t,n)}}});let s=0,o=null,r=window.innerHeight,u=!1,h=null;function t(){if(window.innerWidth<=768)return;const n=window.pageYOffset||document.documentElement.scrollTop;if(Math.abs(n-s)<10)return;s=n;const a=n-50;let t=null,i=-1;if(e.forEach((o,r)=>{if(o.top===0||Math.abs(n-s)>100){const e=o.heading.getBoundingClientRect();o.top=e.top+n}o.top>a&&(i===-1||o.top<e[i].top)&&(t=o.heading,i=r)}),t===null&&e.length>0&&(t=e[0].heading,i=0),t===o)return;if(o=t,e.forEach(e=>{e.link.classList.remove("active","read")}),t){const n=e.find(e=>e.heading===t);if(n){n.link.classList.add("active");for(let t=0;t<i;t++)e[t].link.classList.add("read");setTimeout(()=>{const e=n.link.closest("nav");if(e){const t=n.link.getBoundingClientRect(),s=e.getBoundingClientRect();(t.top<s.top+50||t.bottom>s.bottom-50)&&n.link.scrollIntoView({block:"center"})}},50)}}}let n=null,i=0;function d(){const e=performance.now();if(e-i<16){n||(n=requestAnimationFrame(()=>{t(),n=null,i=performance.now()}));return}t(),i=e}window.addEventListener("scroll",d,{passive:!0});let a;window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(()=>{r=window.innerHeight,e.forEach(e=>{e.top=0}),o=null,t()},150)}),setTimeout(t,50)})