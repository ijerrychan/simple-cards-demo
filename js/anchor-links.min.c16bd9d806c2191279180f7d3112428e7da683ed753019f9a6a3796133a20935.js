document.addEventListener("DOMContentLoaded",function(){"use strict";const r=document.querySelectorAll("article h1, article h2, article h3, article h4, article h5, article h6");if(window.location.hash){const e=document.querySelector(window.location.hash);e&&setTimeout(()=>{location.hash=window.location.hash},100)}const e=[],c=new Map;r.forEach(t=>{if(t.id){const n=document.querySelector(`.article-toc a[href="#${t.id}"]`);if(n){const s={heading:t,link:n,id:t.id,top:0};e.push(s),c.set(t,n)}}});let n=0,s=null,l=window.innerHeight;function t(){if(window.innerWidth<=768)return;const o=window.pageYOffset||document.documentElement.scrollTop;if(Math.abs(o-n)<10)return;n=o;const a=o-50;let t=null,i=-1;if(e.forEach((s,r)=>{if(s.top===0||Math.abs(o-n)>100){const e=s.heading.getBoundingClientRect();s.top=e.top+o}s.top>a&&(i===-1||s.top<e[i].top)&&(t=s.heading,i=r)}),t===null&&e.length>0&&(t=e[0].heading,i=0),t===s)return;if(s=t,e.forEach(e=>{e.link.classList.remove("active","read")}),t){const n=e.find(e=>e.heading===t);if(n){n.link.classList.add("active");for(let t=0;t<i;t++)e[t].link.classList.add("read")}}}let o=null,i=0;function d(){const e=performance.now();if(e-i<16){o||(o=requestAnimationFrame(()=>{t(),o=null,i=performance.now()}));return}t(),i=e}window.addEventListener("scroll",d,{passive:!0});let a;window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(()=>{l=window.innerHeight,e.forEach(e=>{e.top=0}),s=null,t()},150)}),setTimeout(t,50)})